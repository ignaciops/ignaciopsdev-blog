---
export interface Props {
  type?: 'note' | 'tip' | 'warning' | 'danger' | 'info';
  title?: string;
  content?: string;
}

const { type = 'note', title, content } = Astro.props;

const config = {
  note: {
    icon: 'üìù',
    bgColor: 'bg-blue-50',
    borderColor: 'border-blue-500',
    textColor: 'text-blue-900',
    titleColor: 'text-blue-800',
    defaultTitle: 'Nota'
  },
  tip: {
    icon: 'üí°',
    bgColor: 'bg-green-50',
    borderColor: 'border-green-500',
    textColor: 'text-green-900',
    titleColor: 'text-green-800',
    defaultTitle: 'Consejo'
  },
  warning: {
    icon: '‚ö†Ô∏è',
    bgColor: 'bg-orange-50',
    borderColor: 'border-orange-500',
    textColor: 'text-orange-900',
    titleColor: 'text-orange-800',
    defaultTitle: 'Advertencia'
  },
  danger: {
    icon: '‚ùó',
    bgColor: 'bg-red-50',
    borderColor: 'border-red-500',
    textColor: 'text-red-900',
    titleColor: 'text-red-800',
    defaultTitle: 'Peligro'
  },
  info: {
    icon: '‚ÑπÔ∏è',
    bgColor: 'bg-cyan-50',
    borderColor: 'border-cyan-500',
    textColor: 'text-cyan-900',
    titleColor: 'text-cyan-800',
    defaultTitle: 'Informaci√≥n'
  }
};

const currentConfig = config[type];
---

<div class={`${currentConfig.bgColor} ${currentConfig.borderColor} ${currentConfig.textColor} border-l-4 p-4 my-6 rounded-r-lg`}>
  <div class="flex items-center gap-3">
    <span class="text-2xl flex-shrink-0 self-start mt-1" aria-hidden="true">{currentConfig.icon}</span>
    <div class="flex-1">
      {title && <p class={`font-bold ${currentConfig.titleColor} mb-2 text-base`}>{title}</p>}
      <div class="prose prose-base max-w-none callout-content">
        {content ? <p set:html={content.replace(/\n/g, '<br>')} /> : <slot />}
      </div>
    </div>
  </div>
</div>

<style>
  .callout-content :global(p:last-child) {
    margin-bottom: 0;
  }

  .callout-content :global(p:first-child) {
    margin-top: 0;
  }
</style>
